Redux have 2 libraries React-Redux and Redux-toolkit.

Topics :

1. Immutability
2. Functional Programming
3. Redux Store
4. React Dev tools
5. Redux Middleware & Asyncronus Operation
6. Performance Optimization in Redux

==================================== Topics  ========================================

1. Immutability :

   • for arrays we have structuredClone as a inbuild function to make a deepcopy of array.
   
   i)  Shallow Copy :

   let d1 = [1,2,[3,4,5]]

   let d2 = [...d1];

   # if any change in inner array of d1 will affect the d2 array.

   ---------------------------------------------------------------------------------------

   ii) Deep Copy :

    let d1 = [[1,2,[3,4,5]],6];

    function deepcopy (arr:any[]){
        if (arr === null || typeof arr !== "object") return arr;
        let result : any[] = [];
        for(let key in arr) {
            result[key] = deepcopy(arr[key]);
        }
        return result;
    }

    let d2 = deepcopy(d1);

    # Any changes to d1 does not affect d2.

    ------------------------------------------------------------------------------------------

2. Functional Programming :

   • For scable application we use functional programming.
   • Breaking down problems to smaller ones. will ease the error making.
   • Higher Order Function :
        * Take a function as a argument.
        * retuen a function.
        * or does both.
   • Use lodash pipe, compose using currying technique.
   • Pure Function:
      * If a same argument passes same output received.
      * Can be runs in a parallel way -- Concurrency.
      * This function are cacheable.
   • Immutability:
      * Same Immutability concept applicable for Objects too.

   """""" 10-01-2026 - 1:08:19 """""

3. Redux Store :

   • install redus toolkit and react redux - npm install @reduxjs/toolkit react-redux
   • Create App folder and store.ts file.
   • We can create a store using configureStore

      +++++++++ Code +++++++++

      import { configureStore } from "@reduxjs/toolkit";

      export const store = configureStore({
         reducer: {},
      });
      
      ++++++++++++++++++++++++

   • Make the store available for react app:

      +++++++++ Code +++++++++

         import { Provider } from "react-redux";
         import { store } from "./app/store.ts";

         createRoot(document.getElementById("root")!).render(
         <StrictMode>
            <Provider store={store}>
               <App />
            </Provider>
         </StrictMode>
         );
      
      ++++++++++++++++++++++++

   • Create Feature/Counter/ counterSLice.ts
      * the store is divided as slice like componenting a app for better accessable and control.
      * CounterSlice is created to handle counter app state handling.
      * a slice is created using createSlice and export the slice actions and slice reducer as default.

         +++++++++ Code +++++++++

            import { createSlice } from "@reduxjs/toolkit";

            const initialState = {
               count: 0,
            };

            export const counterSlice = createSlice({
               name: "counter",
               initialState,
               reducers: {
                  increment: (state) => {
                     state.count += 1;
                  },
                  decrement: (state) => {
                     state.count -= 1;
                  },
               },
            });

            export const { increment, decrement } = counterSlice.actions;

            export default counterSlice.reducer;

         ++++++++++++++++++++++++

   • import the counter Reducer in store. 

      +++++++++ Code +++++++++
         import counterReducer from "../features/Counter/counterSlice";

         export const store = configureStore({
            reducer: {
               counter: counterReducer,
            },
         });
      ++++++++++++++++++++++++
      
   • From the above code the slice is available in the store which is accessible by the react app.
   • To create a function outside slice to for action to be performed in the slice is neglected and DRY method implemented.
     
      +++++++++++++ Code ++++++++++++++
        
        addPost: {
            reducer(state: any, action: any) {
            state.push(action.payload);
            },
            prepare(title: string, content: string) {
            return {
               payload: {
                  id: Date.now().toString(),
                  title,
                  content,
               },
            };
            },
         },

      ++++++++++++++++++++++++++++++++++

4. React Dev tools :

   • We can check the data flow in redux tool it in browser.

5. Redux Middleware & Asyncronus Operation : starts [ 03:30:23 ] 

   • The redux middleware like express middleware but servers different purpose.
   • CreateAsyncThunk :

      * Its is a function that accepts a string action type and a callback function that returns a promise.
      * That callback function is called thunk.
      * The promise gives three action types (pending, fulfilled, rejected) based on the promise status.
      * The Client action api calls action s are in normal reducers.
      * The middleware handles the asyncronus operation in extraReducers.
      * unwrap is used to get the actual data from the promise like error.
            
   5.1 Extra Reducer :
      • extraReducers is used to handle actions that are not defined inside the slice's own reducers.
      • Mainly used it for handling actions generated by createAsyncThunk or other external actions.

      +++++++++ Code +++++++++

       extraReducers(builder) {
         builder
            .addCase(fetchPosts.pending, (state, action) => {
            state.status = "loading";
            })
            .addCase(fetchPosts.fulfilled, (state, action) => {
            state.status = "succeeded";
            const loadedPosts = action.payload.map((post: any) => ({
               id: post.id.toString(),
               title: post.title,
               content: post.body,
            }));
            state.posts = loadedPosts;
            })
            .addCase(fetchPosts.rejected, (state, action) => {
            state.status = "failed";
            state.error = action.error.message || "Something went wrong";
            });
       },

      ++++++++++++++++++++++++
   
   5.2 Normalization : 
      • Normalization is the process of structuring data to minimize redundancy and improve data integrity.
      • In Redux, normalization helps in managing complex state structures by organizing data into a flat format.
      • createEntityAdapter is used to create a set of prebuilt reducers and selectors for managing normalized data in the Redux store.
      • [6:48:45] It provides methods for common operations like adding, updating, and removing entities.

      +++++++++ Code +++++++++

         import { createEntityAdapter } from "@reduxjs/toolkit";

         const postsAdapter = createEntityAdapter({
            selectId: (post) => post.id,
            sortComparer: (a, b) => b.date.localeCompare(a.date),
         });

         const initialState = postsAdapter.getInitialState({
            status: "idle",
            error: null,
         });

      ++++++++++++++++++++++++

6. Performance Optimization in Redux :

   • Reselect library is used for memoization of the selectors.
   • createSelector is used to create a selector with memoization.
      * because of caching the selectors results does not change for same inputs so re-rendering happens essentially. 

      +++++++++ Code +++++++++

         const selectorPostByUser = createSelector(
            [selectPosts, (_: any, userId: string) => userId],
            (posts, userId) => posts.filter((post: any) => post.userId === userId)
         );

         * it is used for a data and userId passed as argument to filter posts by userId, which are all not changed.

      ++++++++++++++++++++++++

   • It prevents unnecessary re-renders by caching the results of selectors based on their input arguments.
   • Only recomputes the result when the input arguments change.

      6.1 Normalization of state :
         • We can use createEntityAdapter for only normalized state structure.
         • 
         • 
